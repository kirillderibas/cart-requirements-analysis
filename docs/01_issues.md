# 01 — Противоречия и недочёты исходного ТЗ

## 1) Конфликт способов удаления товаров в корзине
- П.2: Пользователь может изменить количество каждого товара в корзине не менее, чем до 1-го. Для удаления товара из корзины используется отдельная кнопка.
- П.9: Если пользователь уменьшает количество товара до 0, товар удаляется из корзины.

Проблема: Два взаимоисключающих правила. Нельзя одновременно запрещать 0 и считать 0 механизмом удаления.
Нужно выбрать один вариант (удаление кнопкой или удаление при установке 0).

## 2) Цена товара: конфликт модели ценообразования
- П.7: Цена на продукт фиксируется на момент добавления в корзину и не меняется.
- П.13: Если цена на товар изменилась в каталоге, система должна автоматически обновить ее в корзине у всех пользователей.

Проблема: одно требование запрещает изменение цены, другое требует изменение цены.
Нужно согласовать бизнес-логику (фиксировать цену в корзине или показывать актуальную цену из каталога).

## 3) Неясность лимита "1–10 единиц"
- П.1: Пользователь может добавить в корзину от 1 до 10 единиц одного товара.

Проблема: не определено, это лимит на одну операцию добавления (за клик), или итоговое количество данного товара в корзине  
Также не описано поведение, если товар уже в корзине.

## 4) Не определено, что такое "5 различных товаров"
- П.3: В корзине может находиться не более 5 различных товаров.

Проблема: "различность" может считаться по SKU, по товару+варианту (вес/объем/цвет), по товару+поставке.
Для реализации это критично — разные трактовки дадут разное поведение.

## 5) Лимит 20 штук и приоритеты правил
- П.4: Суммарное количество всех товаров в корзине не может превышать 20 штук.
- П.1 и П.3 Тоже вводят лимиты

Проблема: не указано, какое правило проверяется первым и что показывать пользователю, если нарушений несколько.
Нужны приоритеты и поведение при отказе.

## 6) Сообщение об ошибке слишком общее
- П.6: "Лимит корзины превышен"

Проблема: одинаковый текст для разных нарушений (10 на позицию / 5 позиций / 20 всего).
Пользователь не понимает, что именно исправлять. Нужна детализация.

## 7) П.5 — избыточная формулировка
- П.5: "Товары в корзине могут быть разные"

Проблема: не добавляет правил и не уточняет поведение. Лучше удалить или заменить на конкретику (например, про варианты товара).

## 8) Реклама в корзине: неконкретные требования
- П.10: В корзине может быть реклама других продуктов.
- П.11:  Реклама товаров в корзине должна быть каждый будний день по утрам и вечерам.

Проблема:
1. "может быть" не является требованием
2. "утро/вечер" не определены по времени и часовому поясу
3. непонятно, что именно должно происходить по расписанию (показывать блок или обновлять подборку)
4. не определен источник рекламы и правила подбора

## 9) Ошибка нумерации
- отсутствует пункт 12

Проблема: маркер низкого качества документа (для проекта — риск дальнейших ошибок).

## 10) П.13: "у всех пользователей" — технический риск/неполнота

Проблема: требуется массовое обновление корзин всех пользователей.

Не определены: триггер, частота, допустимая задержка, ограничения по нагрузке, поведение для активных сессий.
