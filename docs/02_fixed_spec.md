# 02 — Исправленная версия фрагмента ТЗ 

## Термины
- **SKU** — уникальная позиция каталога.
- **Позиция корзины** — строка в корзине, соответствующая одному SKU.

## Ограничения корзины
1. Количество одной позиции (SKU) в корзине: **1…10**.
2. В корзине может быть не более **5 различных позиций** (разных SKU).
3. Общее количество всех товаров в корзине: не более **20** единиц.

## Добавление товара
4. При добавлении товара:
   - если товара нет в корзине, то создается новая позиция с количеством = N (N в диапазоне 1…10)
   - если товар уже есть, то количество увеличивается на N, но не выше 10

## Изменение количества и удаление
5. Пользователь может изменить количество позиции в корзине в диапазоне **1…10**.
6. Удаление позиции выполняется **по кнопке "Удалить"** (уменьшение до 0 не используется).

## Ошибки и сообщения при превышении лимитов
7. Если действие пользователя приводит к нарушению ограничений (пп.1–3), система отменяет действие и показывает сообщение:
   - при превышении 10 для позиции: **"Нельзя добавить больше 10 шт. этого товара"**
   - при превышении 5 разных позиций: **"В корзине может быть не более 5 разных товаров"**
   - при превышении 20 суммарно: **"Общее количество товаров в корзине не может превышать 20"**
8. Если нарушено несколько правил - сообщение выбирается по приоритету:  
   **(1) лимит позиции (2) лимит разных позиций (3) лимит суммарного количества**.

## Отображение корзины
9. На странице корзины отображается:
   - список позиций
   - количество
   - цена за единицу
   - стоимость позиции (кол-во × цена)
   - итоговая сумма корзины

## Цены 
10. В корзине отображается **актуальная цена из каталога**.
11. При открытии страницы корзины и перед оформлением заказа система обновляет цены и пересчитывает суммы.
12. Если цена изменилась относительно ранее отображаемой — показывается уведомление:  
   **"Цена на товар X изменилась. Корзина пересчитана."**

## Рекомендации
13. На странице корзины может отображаться блок "Рекомендуем" (реклама) в виде списка товаров.
14. Содержимое блока "Рекомендуем" обновляется по расписанию: **по будним дням в 09:00 и 18:00 (Europe/Moscow)**.
15. Если пользователь открывает корзину между обновлениями, то показывается актуальная на момент открытия подборка.
